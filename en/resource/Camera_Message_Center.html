
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Detection Alarm Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism-okaidia.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-pageview-count/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-language-picker/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-flexible-alerts/style.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="Camera_Message_Center.html" />
    
    
    <link rel="prev" href="ptz.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Features Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Integrated.html">
            
                <a href="Integrated.html">
            
                    
                    Integrate SDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="ProgramArchitecure.html">
            
                <a href="ProgramArchitecure.html">
            
                    
                    SDK Architecture
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="User.html">
            
                <a href="User.html">
            
                    
                    User Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="home_device.html">
            
                <a href="home_device.html#Home & Equipment">
            
                    
                    Home and Device
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="home_device.html">
            
                <a href="home_device.html#Home management">
            
                    
                    Home Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="home_device.html">
            
                <a href="home_device.html#Device management">
            
                    
                    Device Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="home_device.html">
            
                <a href="home_device.html#Camera device">
            
                    
                    Camera Device
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="wifi_config.html">
            
                <a href="wifi_config.html">
            
                    
                    Device Configutation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="LiveProcess.html">
            
                <a href="LiveProcess.html">
            
                    
                    Camera Functions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="LiveProcess.html">
            
                <a href="LiveProcess.html#Live video">
            
                    
                    Live Video
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="PlaybackProcess.html">
            
                <a href="PlaybackProcess.html">
            
                    
                    Playback
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="av_function.html">
            
                <a href="av_function.html">
            
                    
                    AV Functions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="cloud_video.html">
            
                <a href="cloud_video.html">
            
                    
                    Cloud Storage
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="cloud_video.html">
            
                <a href="cloud_video.html#Process">
            
                    
                    Flow Chart
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="cloud_video.html">
            
                <a href="cloud_video.html#Purchase">
            
                    
                    Cloud Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="cloud_video.html">
            
                <a href="cloud_video.html#Cloud video">
            
                    
                    Cloud Video
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="camera_device_points.html">
            
                <a href="camera_device_points.html#Device function points">
            
                    
                    Extension Features
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="camera_device_points.html">
            
                <a href="camera_device_points.html#Function points constant">
            
                    
                    Data Point Id
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="doorbell.html">
            
                <a href="doorbell.html">
            
                    
                    Doorbell
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="sd_card.html">
            
                <a href="sd_card.html">
            
                    
                    Memory Card
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="ptz.html">
            
                <a href="ptz.html">
            
                    
                    PTZ
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="Camera_Message_Center.html">
            
                <a href="Camera_Message_Center.html#Detection alarm">
            
                    
                    Detection Alarm
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="Camera_Message_Center.html">
            
                <a href="Camera_Message_Center.html#Message List">
            
                    
                    Message List
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="Camera_Message_Center.html">
            
                <a href="Camera_Message_Center.html#Video message">
            
                    
                    Video Message
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="statusCode.html">
            
                <a href="statusCode.html">
            
                    
                    Error Codes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="doc_update_log.html">
            
                <a href="doc_update_log.html">
            
                    
                    Change Log
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Detection Alarm</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#detection-alarm"><b>1. </b>Detection alarm</a></li><ul><li><span class="title-icon "></span><a href="#message-list"><b>1.1. </b>Message List</a></li><ul><li><span class="title-icon "></span><a href="#module-import"><b>1.1.1. </b>Module Import</a></li><li><span class="title-icon "></span><a href="#message-calendar"><b>1.1.2. </b>Message calendar</a></li><li><span class="title-icon "></span><a href="#message-type"><b>1.1.3. </b>Message type</a></li><li><span class="title-icon "></span><a href="#message-list_1"><b>1.1.4. </b>Message list</a></li><li><span class="title-icon "></span><a href="#batch-delete-alarm-message"><b>1.1.5. </b>Batch delete alarm message.</a></li></ul><li><span class="title-icon "></span><a href="#video-message"><b>1.2. </b>Video message</a></li><ul><li><span class="title-icon "></span><a href="#alarm-message-and-playback"><b>1.2.1. </b>Alarm message and playback</a></li></ul></ul></ul></div><h1 id="detection-alarm"><a name="detection-alarm" class="anchor-navigation-ex-anchor" href="#detection-alarm"><i class="fa fa-link" aria-hidden="true"></i></a>1. Detection alarm</h1>
<p>Tuya smart camera usually has the ability of detecting alarm. There are two main types of alarm detection, sound detection and motion detection. When the device detects a sound or object moving, it sends a warning message, and if your App is integrated with push, it will also receive a push notification.  Integrate push refer to<a href="https://tuyainc.github.io/tuyasmart_home_android_sdk_doc/en/resource/Push.html" target="_blank"> Integrate push</a>.</p>
<p>The alarm message usually comes with a screenshot of the current video.</p>
<p>Direct-powered doorbell equipment, has ability to provide video messages. When someone rings the doorbell, the device can upload a video message, which is also picked up by an alarm message with a six-second encrypted video.</p>
<h2 id="message-list"><a name="message-list" class="anchor-navigation-ex-anchor" href="#message-list"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. Message List</h2>
<h3 id="module-import"><a name="module-import" class="anchor-navigation-ex-anchor" href="#module-import"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.1. Module Import</h3>
<pre class="language-"><code class="lang-groovy">implementation <span class="token string">&apos;com.tuya.smart:tuyasmart-ipc-camera-message:3.13.0r128&apos;</span>
</code></pre>
<h3 id="message-calendar"><a name="message-calendar" class="anchor-navigation-ex-anchor" href="#message-calendar"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.2. Message calendar</h3>
<p>You can use the SDK to look up the date of the alarm message in a certain year and a certain month, so that it can be displayed visually on the calendar.</p>
<p><strong>Declaration</strong></p>
<p>The camera message center records the picture data, video data of the camera detection alarm and data of someone visiting.</p>
<pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">queryAlarmDetectionDaysByMonth</span><span class="token punctuation">(</span><span class="token class-name">String</span> jsonParams<span class="token punctuation">,</span> <span class="token class-name">ResultListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">JSONArray</span><span class="token punctuation">&gt;</span></span> listener<span class="token punctuation">)</span>
</code></pre>
<p><strong>Parameter</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Parameter Type</th>
<th>Parameter requirements</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>msgSrcId</td>
<td>String</td>
<td>Need</td>
<td>Device Id</td>
</tr>
<tr>
<td>month</td>
<td>String</td>
<td>Need</td>
<td>year and month, with-in the middle, for example: 2019-8</td>
</tr>
<tr>
<td>timeZone</td>
<td>String</td>
<td>Need</td>
<td>Time zone, for example: Asia / Shanghai</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-java"><span class="token class-name">JSONObject</span> object <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        object<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msgSrcId&quot;</span><span class="token punctuation">,</span> devId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        object<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;timeZone&quot;</span><span class="token punctuation">,</span> <span class="token class-name">TimeZoneUtils</span><span class="token punctuation">.</span><span class="token function">getTimezoneGCMById</span><span class="token punctuation">(</span><span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        object<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;month&quot;</span><span class="token punctuation">,</span> year <span class="token operator">+</span> <span class="token string">&quot;-&quot;</span> <span class="token operator">+</span> month<span class="token punctuation">)</span><span class="token punctuation">;</span>
        messageBusiness<span class="token punctuation">.</span><span class="token function">queryAlarmDetectionDaysByMonth</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">Business</span><span class="token punctuation">.</span><span class="token class-name">ResultListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">JSONArray</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token annotation punctuation">@Override</span>
                    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onFailure</span><span class="token punctuation">(</span><span class="token class-name">BusinessResponse</span> businessResponse<span class="token punctuation">,</span> <span class="token class-name">JSONArray</span> objects<span class="token punctuation">,</span> <span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        mHandler<span class="token punctuation">.</span><span class="token function">sendEmptyMessage</span><span class="token punctuation">(</span>ALARM_DETECTION_DATE_MONTH_FAILED<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>

                    <span class="token annotation punctuation">@Override</span>
                    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token class-name">BusinessResponse</span> businessResponse<span class="token punctuation">,</span> <span class="token class-name">JSONArray</span> objects<span class="token punctuation">,</span> <span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> dates <span class="token operator">=</span> <span class="token class-name">JSONArray</span><span class="token punctuation">.</span><span class="token function">parseArray</span><span class="token punctuation">(</span>objects<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>dates<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                            day <span class="token operator">=</span> dates<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                        mHandler<span class="token punctuation">.</span><span class="token function">sendEmptyMessage</span><span class="token punctuation">(</span>ALARM_DETECTION_DATE_MONTH_SUCCESS<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Example of returned data structure: (specifically based on actual request):</p>
<pre class="language-"><code class="lang-json"><span class="token punctuation">{</span>
    <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;20&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;t&quot;</span><span class="token operator">:</span> <span class="token number">1564390878414</span><span class="token punctuation">,</span>
    <span class="token property">&quot;success&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="message-type"><a name="message-type" class="anchor-navigation-ex-anchor" href="#message-type"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.3. Message type</h3>
<p>There are many types of detection alarm messages according to the trigger mode, and some types can be divided into a large category. The Camera SDK provides a list of default classifications to facilitate querying alarm messages by classification.</p>
<p><strong>Declaration</strong></p>
<p>Get message type</p>
<pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">queryAlarmDetectionClassify</span><span class="token punctuation">(</span><span class="token class-name">String</span> devId<span class="token punctuation">,</span> <span class="token class-name">ResultListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ArrayList</span><span class="token punctuation">&lt;</span><span class="token class-name">CameraMessageClassifyBean</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> listener<span class="token punctuation">)</span>
</code></pre>
<p><strong>Parameter</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Parameter Type</th>
<th>Parameter requirements</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>devId</td>
<td>String</td>
<td>Need</td>
<td>Device Id</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">queryCameraMessageClassify</span><span class="token punctuation">(</span><span class="token class-name">String</span> devId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>messageBusiness <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        messageBusiness<span class="token punctuation">.</span><span class="token function">queryAlarmDetectionClassify</span><span class="token punctuation">(</span>devId<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Business</span><span class="token punctuation">.</span><span class="token class-name">ResultListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ArrayList</span><span class="token punctuation">&lt;</span><span class="token class-name">CameraMessageClassifyBean</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onFailure</span><span class="token punctuation">(</span><span class="token class-name">BusinessResponse</span> businessResponse<span class="token punctuation">,</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CameraMessageClassifyBean</span><span class="token punctuation">&gt;</span></span> cameraMessageClassifyBeans<span class="token punctuation">,</span> <span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                mHandler<span class="token punctuation">.</span><span class="token function">sendEmptyMessage</span><span class="token punctuation">(</span>MOTION_CLASSIFY_FAILED<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token class-name">BusinessResponse</span> businessResponse<span class="token punctuation">,</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CameraMessageClassifyBean</span><span class="token punctuation">&gt;</span></span> cameraMessageClassifyBeans<span class="token punctuation">,</span> <span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                selectClassify <span class="token operator">=</span> cameraMessageClassifyBeans<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                mHandler<span class="token punctuation">.</span><span class="token function">sendEmptyMessage</span><span class="token punctuation">(</span>MOTION_CLASSIFY_SUCCESS<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Example of returned data structure: (specifically based on actual request):</p>
<pre class="language-"><code class="lang-json">\<span class="token punctuation">{</span>
    <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token property">&quot;describe&quot;</span><span class="token operator">:</span> <span class="token string">&quot;All&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;describe&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Motion&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;msgCode&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;ipc_motion&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ipc_linger&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ipc_passby&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ipc_human&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ipc_car&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ipc_cat&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;MOVEMENT_DETECT_MSG&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;describe&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Talk&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;msgCode&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;ipc_connected&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ipc_unconnected&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ipc_refuse&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ipc_doorbell&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ipc_leave_msg&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;t&quot;</span><span class="token operator">:</span> <span class="token number">1564390878289</span><span class="token punctuation">,</span>
    <span class="token property">&quot;success&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>CameraMessageClassifyBean</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>describe</td>
<td>message description</td>
</tr>
<tr>
<td>msgCode</td>
<td>/</td>
</tr>
<tr>
<td>selected</td>
<td>/</td>
</tr>
</tbody>
</table>
<p>The message type represents the trigger form of the alarm message, which is reflected in the code as the <code>msgCode</code> attribute of the alarm message data model.</p>
<p><strong>Message Type</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ipc_motion</td>
<td>Motion detecting</td>
</tr>
<tr>
<td>ipc_doorbell</td>
<td>Doorbell ring</td>
</tr>
<tr>
<td>ipc_dev_link</td>
<td>Devices linkage</td>
</tr>
<tr>
<td>ipc_passby</td>
<td>Someone passby</td>
</tr>
<tr>
<td>ipc_linger</td>
<td>Someone linger</td>
</tr>
<tr>
<td>ipc_leave_msg</td>
<td>Doorbell message</td>
</tr>
<tr>
<td>ipc_connected</td>
<td>Doorbell ring has answered</td>
</tr>
<tr>
<td>ipc_unconnected</td>
<td>Doorbell not answered</td>
</tr>
<tr>
<td>ipc_refuse</td>
<td>Doorbell resisted</td>
</tr>
<tr>
<td>ipc_human</td>
<td>Human detection</td>
</tr>
<tr>
<td>ipc_cat</td>
<td>Pet detection</td>
</tr>
<tr>
<td>ipc_car</td>
<td>Car detection</td>
</tr>
<tr>
<td>ipc_baby_cry</td>
<td>Baby cry</td>
</tr>
<tr>
<td>ipc_bang</td>
<td>Abnormal sound</td>
</tr>
<tr>
<td>ipc_face</td>
<td>Face detection</td>
</tr>
<tr>
<td>ipc_antibreak</td>
<td>Forced demolition alarm</td>
</tr>
<tr>
<td>ipc_low_battery</td>
<td>Low power alarm</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Depending on the device&apos;s capabilities, the types of messages that can be triggered can vary.</p>
</blockquote>
<h3 id="message-list_1"><a name="message-list_1" class="anchor-navigation-ex-anchor" href="#message-list_1"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.4. Message list</h3>
<p>Get message center specific data</p>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">getAlarmDetectionMessageList</span><span class="token punctuation">(</span><span class="token class-name">String</span> json<span class="token punctuation">,</span> <span class="token class-name">ResultListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">JSONObject</span><span class="token punctuation">&gt;</span></span> listener<span class="token punctuation">)</span>
</code></pre>
<p><strong>Parameter</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">Parameter</th>
<th>Parameter Type</th>
<th>Parameter requirements</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">msgSrcId</td>
<td>String</td>
<td>Need</td>
<td>device Id</td>
</tr>
<tr>
<td style="text-align:center">msgType</td>
<td>Int</td>
<td>Need</td>
<td>Message Type, mesType = 4</td>
</tr>
<tr>
<td style="text-align:center">limit</td>
<td>Int</td>
<td>Need</td>
<td>Limit</td>
</tr>
<tr>
<td style="text-align:center">offset</td>
<td>Int</td>
<td>Need</td>
<td>Offset</td>
</tr>
<tr>
<td style="text-align:center">startTime</td>
<td>Long</td>
<td>Need</td>
<td>Start time,  Unix timestamp, seconds</td>
</tr>
<tr>
<td style="text-align:center">endTime</td>
<td>Long</td>
<td>Need</td>
<td>End time , Unix timestamp, seconds</td>
</tr>
<tr>
<td style="text-align:center">msgCodes</td>
<td>String[]</td>
<td>/</td>
<td>If not, all types of data are requested by default, if they are, then the corresponding type of message data is requested (for the message array, please refer to the message type interface introduction)</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-java"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> messageBusiness<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">long</span> startTime <span class="token operator">=</span> <span class="token class-name">DateUtils</span><span class="token punctuation">.</span><span class="token function">getTodayStart</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> endTime <span class="token operator">=</span> <span class="token class-name">DateUtils</span><span class="token punctuation">.</span><span class="token function">getTodayEnd</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1L</span><span class="token punctuation">;</span>
    <span class="token class-name">JSONObject</span> object <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    object<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msgSrcId&quot;</span><span class="token punctuation">,</span> devId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    object<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;startTime&quot;</span><span class="token punctuation">,</span> startTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
    object<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;endTime&quot;</span><span class="token punctuation">,</span> endTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
    object<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msgType&quot;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    object<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;limit&quot;</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    object<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;keepOrig&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    object<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;offset&quot;</span><span class="token punctuation">,</span> offset<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> selectClassify<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        object<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msgCodes&quot;</span><span class="token punctuation">,</span> selectClassify<span class="token punctuation">.</span><span class="token function">getMsgCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    messageBusiness<span class="token punctuation">.</span><span class="token function">getAlarmDetectionMessageList</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Business</span><span class="token punctuation">.</span><span class="token class-name">ResultListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">JSONObject</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onFailure</span><span class="token punctuation">(</span><span class="token class-name">BusinessResponse</span> businessResponse<span class="token punctuation">,</span> <span class="token class-name">JSONObject</span> jsonObject<span class="token punctuation">,</span> <span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            mHandler<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>MSG_GET_ALARM_DETECTION<span class="token punctuation">,</span> ARG1_OPERATE_FAIL<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token class-name">BusinessResponse</span> businessResponse<span class="token punctuation">,</span> <span class="token class-name">JSONObject</span> jsonObject<span class="token punctuation">,</span> <span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CameraMessageBean</span><span class="token punctuation">&gt;</span></span> msgList<span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                msgList <span class="token operator">=</span> <span class="token class-name">JSONArray</span><span class="token punctuation">.</span><span class="token function">parseArray</span><span class="token punctuation">(</span>jsonObject<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;datas&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">CameraMessageBean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                msgList <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>msgList <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                offset <span class="token operator">+=</span> msgList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                mHandler<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>MSG_GET_ALARM_DETECTION<span class="token punctuation">,</span> ARG1_OPERATE_SUCCESS<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                mHandler<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>MSG_GET_ALARM_DETECTION<span class="token punctuation">,</span> ARG1_OPERATE_FAIL<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Example of returned data structure: (specifically based on actual request):</p>
<pre class="language-"><code class="lang-json"> <span class="token punctuation">{</span>
    <span class="token property">&quot;result&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;datas&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;actionURL&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;tuyaSmart://panel?devId=6c659ecc586a7da3b5pawj&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;msgContent&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;switch open&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;msgType&quot;</span> <span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
        <span class="token property">&quot;time&quot;</span> <span class="token operator">:</span> <span class="token number">1512639767</span><span class="token punctuation">,</span>
        <span class="token property">&quot;icon&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;https://images.tuyacn.com/smart/product_icon/kt.png&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;dateTime&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2017-12-7 17:42&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token number">3261004</span><span class="token punctuation">,</span>
        <span class="token property">&quot;msgSrcId&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;6c659ecc586a7da3b5pawj&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msgTypeContent&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;test&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
     <span class="token property">&quot;actionURL&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;tuyaSmart://panel?devId=6c659ecc586a7da3b5pawj&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;msgContent&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;switch open&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;msgType&quot;</span> <span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
        <span class="token property">&quot;time&quot;</span> <span class="token operator">:</span> <span class="token number">1511420861</span><span class="token punctuation">,</span>
    <span class="token property">&quot;icon&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;https://images.tuyacn.com/smart/product_icon/kt.png&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;dateTime&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2017-11-23 15:07&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token number">2967004</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msgSrcId&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;6c659ecc586a7da3b5pawj&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;msgTypeContent&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;test&quot;</span>
<span class="token punctuation">}</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;totalCount&quot;</span> <span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;t&quot;</span> <span class="token operator">:</span> <span class="token number">1539243923807</span><span class="token punctuation">,</span>
    <span class="token property">&quot;success&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;status&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="cameramessagebean-data-model"><a name="cameramessagebean-data-model" class="anchor-navigation-ex-anchor" href="#cameramessagebean-data-model"><i class="fa fa-link" aria-hidden="true"></i></a><a name="cameramessagebean-data-model" class="plugin-anchor" href="#cameramessagebean-data-model"><i class="fa fa-link" aria-hidden="true"></i></a>CameraMessageBean data model</h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>dateTime</td>
<td>message create date</td>
</tr>
<tr>
<td>msgTypeContent</td>
<td>/</td>
</tr>
<tr>
<td>msgType</td>
<td>/</td>
</tr>
<tr>
<td>time</td>
<td>message create time stamp</td>
</tr>
<tr>
<td>attachPics</td>
<td>Picture of message event, array format, take the first data</td>
</tr>
<tr>
<td>attachVideos</td>
<td>Video data of message event, array format, take the first data</td>
</tr>
<tr>
<td>actionURL</td>
<td>/</td>
</tr>
<tr>
<td>id</td>
<td>/</td>
</tr>
<tr>
<td>msgSrcId</td>
<td>message ID</td>
</tr>
</tbody>
</table>
<h3 id="batch-delete-alarm-message"><a name="batch-delete-alarm-message" class="anchor-navigation-ex-anchor" href="#batch-delete-alarm-message"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.5. Batch delete alarm message.</h3>
<p><strong>Declaration</strong></p>
<p>delete Message </p>
<pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">deleteAlarmDetectionMessageList</span><span class="token punctuation">(</span><span class="token class-name">String</span> ids<span class="token punctuation">,</span> <span class="token class-name">ResultListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">&gt;</span></span> listener<span class="token punctuation">)</span>
</code></pre>
<p><strong>Parameter</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">Parameter</th>
<th>Parameter Type</th>
<th>Parameter requirements</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ids</td>
<td>String</td>
<td>Need</td>
<td>String, multiple message ids separated by commas</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-java"><span class="token class-name">StringBuilder</span> ids <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> mWaitingDeleteCameraMessageList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ids<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>mWaitingDeleteCameraMessageList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">!=</span> mWaitingDeleteCameraMessageList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ids<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
messageBusiness<span class="token punctuation">.</span><span class="token function">deleteAlarmDetectionMessageList</span><span class="token punctuation">(</span>ids<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Business</span><span class="token punctuation">.</span><span class="token class-name">ResultListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onFailure</span><span class="token punctuation">(</span><span class="token class-name">BusinessResponse</span> businessResponse<span class="token punctuation">,</span> <span class="token class-name">Boolean</span> aBoolean<span class="token punctuation">,</span> <span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    mHandler<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>MSG_DELETE_ALARM_DETECTION<span class="token punctuation">,</span> ARG1_OPERATE_FAIL<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token class-name">BusinessResponse</span> businessResponse<span class="token punctuation">,</span> <span class="token class-name">Boolean</span> aBoolean<span class="token punctuation">,</span> <span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    mCameraMessageList<span class="token punctuation">.</span><span class="token function">removeAll</span><span class="token punctuation">(</span>mWaitingDeleteCameraMessageList<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    mWaitingDeleteCameraMessageList<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    mHandler<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">MessageUtil</span><span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>MSG_DELETE_ALARM_DETECTION<span class="token punctuation">,</span> ARG1_OPERATE_SUCCESS<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Example of returned data structure: (specifically based on actual request):</p>
<pre class="language-"><code class="lang-json"><span class="token punctuation">{</span>
    <span class="token property">&quot;result&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;t&quot;</span> <span class="token operator">:</span> <span class="token number">1548058543873</span><span class="token punctuation">,</span>
    <span class="token property">&quot;success&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;status&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="video-message"><a name="video-message" class="anchor-navigation-ex-anchor" href="#video-message"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. Video message</h2>
<p><strong>Declaration</strong></p>
<p>Register the listener. Only after registration can you get the callback data for video playback</p>
<pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">registorOnP2PCameraListener</span><span class="token punctuation">(</span><span class="token class-name">OnP2PCameraListener</span> listener<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameter</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>OnP2PCameraListener</td>
<td>Video play callback data</td>
</tr>
</tbody>
</table>
<p><strong>Declaration</strong></p>
<p>Inject player view to render video</p>
<pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">generateCloudCameraView</span><span class="token punctuation">(</span><span class="token class-name">IRegistorIOTCListener</span> view<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameter</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>IRegistorIOTCListener</td>
<td>Video play callback data</td>
</tr>
</tbody>
</table>
<p><strong>Declaration</strong></p>
<p>create Message VideoPlayer device</p>
<pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">createCloudDevice</span><span class="token punctuation">(</span><span class="token class-name">String</span> cachePath<span class="token punctuation">,</span> <span class="token class-name">String</span> devId<span class="token punctuation">,</span> <span class="token class-name">OperationDelegateCallBack</span> callBack<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameter</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>cachePath</td>
<td>cache Video file path</td>
</tr>
<tr>
<td>devId</td>
<td>device Id</td>
</tr>
<tr>
<td>OperationDelegateCallBack</td>
<td>operation callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-kotlin">cloudVideo<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">createCloudDevice</span><span class="token punctuation">(</span>cachePath<span class="token punctuation">,</span> devId<span class="token punctuation">,</span> <span class="token keyword">object</span> <span class="token operator">:</span> OperationDelegateCallBack <span class="token punctuation">{</span>
  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span>sessionId<span class="token operator">:</span> Int<span class="token punctuation">,</span> requestId<span class="token operator">:</span> Int<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    mHandler<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>MessageUtil<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>ICameraVideoPlayModel<span class="token punctuation">.</span>MSG_CLOUD_MEDIA_DEVICE<span class="token punctuation">,</span> ICameraVideoPlayModel<span class="token punctuation">.</span>OPERATE_SUCCESS<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onFailure</span><span class="token punctuation">(</span>sessionId<span class="token operator">:</span> Int<span class="token punctuation">,</span> requestId<span class="token operator">:</span> Int<span class="token punctuation">,</span> errCode<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    mHandler<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>MessageUtil<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>ICameraVideoPlayModel<span class="token punctuation">.</span>MSG_CLOUD_MEDIA_DEVICE<span class="token punctuation">,</span> ICameraVideoPlayModel<span class="token punctuation">.</span>OPERATE_FAIL<span class="token punctuation">,</span> errCode<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p><strong>Declaration</strong></p>
<p>Play video in alarm message</p>
<pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">playVideo</span><span class="token punctuation">(</span><span class="token class-name">String</span> videoUrl<span class="token punctuation">,</span> <span class="token keyword">int</span> startTime<span class="token punctuation">,</span> <span class="token class-name">String</span> encryptKey<span class="token punctuation">,</span> <span class="token class-name">OperationCallBack</span> callback<span class="token punctuation">,</span> <span class="token class-name">OperationCallBack</span> playFinishedCallBack<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameter</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>videoUrl</td>
<td>Video url</td>
</tr>
<tr>
<td>startTime</td>
<td>Start playback time, initial value: 0</td>
</tr>
<tr>
<td>encryptKey</td>
<td>Key for playing video</td>
</tr>
<tr>
<td>callback</td>
<td>operation callback</td>
</tr>
<tr>
<td>playFinishedCallBack</td>
<td>finish play callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-kotlin"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">playVideo</span><span class="token punctuation">(</span>videoUrl<span class="token operator">:</span> String<span class="token punctuation">,</span> startTime<span class="token operator">:</span> Int<span class="token punctuation">,</span> encryptKey<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>cloudVideo <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  cloudVideo<span class="token operator">!!</span><span class="token punctuation">.</span><span class="token function">playVideo</span><span class="token punctuation">(</span>videoUrl<span class="token punctuation">,</span> startTime<span class="token punctuation">,</span> encryptKey<span class="token punctuation">,</span> <span class="token keyword">object</span> <span class="token operator">:</span> OperationCallBack <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span>sessionId<span class="token operator">:</span> Int<span class="token punctuation">,</span> requestId<span class="token operator">:</span> Int<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token operator">:</span> String<span class="token punctuation">,</span> camera<span class="token operator">:</span> Any<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      playState <span class="token operator">=</span> CloudPlayState<span class="token punctuation">.</span>STATE_PLAYING
      mHandler<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>MessageUtil<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>ICameraVideoPlayModel<span class="token punctuation">.</span>MSG_CLOUD_VIDEO_PLAY<span class="token punctuation">,</span> ICameraVideoPlayModel<span class="token punctuation">.</span>OPERATE_SUCCESS<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onFailure</span><span class="token punctuation">(</span>sessionId<span class="token operator">:</span> Int<span class="token punctuation">,</span> requestId<span class="token operator">:</span> Int<span class="token punctuation">,</span> errCode<span class="token operator">:</span> Int<span class="token punctuation">,</span> camera<span class="token operator">:</span> Any<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      playState <span class="token operator">=</span> CloudPlayState<span class="token punctuation">.</span>STATE_ERROR
      mHandler<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>MessageUtil<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>ICameraVideoPlayModel<span class="token punctuation">.</span>MSG_CLOUD_VIDEO_PLAY<span class="token punctuation">,</span> ICameraVideoPlayModel<span class="token punctuation">.</span>OPERATE_FAIL<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">object</span> <span class="token operator">:</span> OperationCallBack <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span>sessionId<span class="token operator">:</span> Int<span class="token punctuation">,</span> requestId<span class="token operator">:</span> Int<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token operator">:</span> String<span class="token punctuation">,</span> camera<span class="token operator">:</span> Any<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      playState <span class="token operator">=</span> CloudPlayState<span class="token punctuation">.</span>STATE_COMPLETED
      mHandler<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>MessageUtil<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>ICameraVideoPlayModel<span class="token punctuation">.</span>MSG_CLOUD_VIDEO_STOP<span class="token punctuation">,</span> ICameraVideoPlayModel<span class="token punctuation">.</span>OPERATE_SUCCESS<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onFailure</span><span class="token punctuation">(</span>sessionId<span class="token operator">:</span> Int<span class="token punctuation">,</span> requestId<span class="token operator">:</span> Int<span class="token punctuation">,</span> errCode<span class="token operator">:</span> Int<span class="token punctuation">,</span> camera<span class="token operator">:</span> Any<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      mHandler<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>MessageUtil<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>ICameraVideoPlayModel<span class="token punctuation">.</span>MSG_CLOUD_VIDEO_STOP<span class="token punctuation">,</span> ICameraVideoPlayModel<span class="token punctuation">.</span>OPERATE_FAIL<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>Declaration</strong></p>
<p>Pause playing</p>
<pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">pauseVideo</span><span class="token punctuation">(</span><span class="token class-name">OperationCallBack</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameter</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>OperationDelegateCallBack</td>
<td>operation callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-kotlin"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">pauseVideo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>cloudVideo <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  cloudVideo<span class="token operator">!!</span><span class="token punctuation">.</span><span class="token function">pauseVideo</span><span class="token punctuation">(</span><span class="token keyword">object</span> <span class="token operator">:</span> OperationCallBack <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span>sessionId<span class="token operator">:</span> Int<span class="token punctuation">,</span> requestId<span class="token operator">:</span> Int<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token operator">:</span> String<span class="token punctuation">,</span> camera<span class="token operator">:</span> Any<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      playState <span class="token operator">=</span> CloudPlayState<span class="token punctuation">.</span>STATE_PAUSED
      mHandler<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>MessageUtil<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>ICameraVideoPlayModel<span class="token punctuation">.</span>MSG_CLOUD_VIDEO_PAUSE<span class="token punctuation">,</span> ICameraVideoPlayModel<span class="token punctuation">.</span>OPERATE_SUCCESS<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onFailure</span><span class="token punctuation">(</span>sessionId<span class="token operator">:</span> Int<span class="token punctuation">,</span> requestId<span class="token operator">:</span> Int<span class="token punctuation">,</span> errCode<span class="token operator">:</span> Int<span class="token punctuation">,</span> camera<span class="token operator">:</span> Any<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      mHandler<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>MessageUtil<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>ICameraVideoPlayModel<span class="token punctuation">.</span>MSG_CLOUD_VIDEO_PAUSE<span class="token punctuation">,</span> ICameraVideoPlayModel<span class="token punctuation">.</span>OPERATE_FAIL<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>Declaration</strong></p>
<p>Resume playing</p>
<pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">resumeVideo</span><span class="token punctuation">(</span><span class="token class-name">OperationCallBack</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameter</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>OperationDelegateCallBack</td>
<td>operation callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-kotlin"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">resumeVideo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>cloudVideo <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  cloudVideo<span class="token operator">!!</span><span class="token punctuation">.</span><span class="token function">resumeVideo</span><span class="token punctuation">(</span><span class="token keyword">object</span> <span class="token operator">:</span> OperationCallBack <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span>sessionId<span class="token operator">:</span> Int<span class="token punctuation">,</span> requestId<span class="token operator">:</span> Int<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token operator">:</span> String<span class="token punctuation">,</span> camera<span class="token operator">:</span> Any<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      playState <span class="token operator">=</span> CloudPlayState<span class="token punctuation">.</span>STATE_PLAYING
      mHandler<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>MessageUtil<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>ICameraVideoPlayModel<span class="token punctuation">.</span>MSG_CLOUD_VIDEO_RESUME<span class="token punctuation">,</span> ICameraVideoPlayModel<span class="token punctuation">.</span>OPERATE_SUCCESS<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onFailure</span><span class="token punctuation">(</span>sessionId<span class="token operator">:</span> Int<span class="token punctuation">,</span> requestId<span class="token operator">:</span> Int<span class="token punctuation">,</span> errCode<span class="token operator">:</span> Int<span class="token punctuation">,</span> camera<span class="token operator">:</span> Any<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      mHandler<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>MessageUtil<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>ICameraVideoPlayModel<span class="token punctuation">.</span>MSG_CLOUD_VIDEO_RESUME<span class="token punctuation">,</span> ICameraVideoPlayModel<span class="token punctuation">.</span>OPERATE_FAIL<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>Declaration</strong></p>
<p>Stop playing</p>
<pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">stopVideo</span><span class="token punctuation">(</span><span class="token class-name">OperationCallBack</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameter</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>OperationDelegateCallBack</td>
<td>operation callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-kotlin"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">stopVideo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>cloudVideo <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  cloudVideo<span class="token operator">!!</span><span class="token punctuation">.</span><span class="token function">stopVideo</span><span class="token punctuation">(</span><span class="token keyword">object</span> <span class="token operator">:</span> OperationCallBack <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span>sessionId<span class="token operator">:</span> Int<span class="token punctuation">,</span> requestId<span class="token operator">:</span> Int<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token operator">:</span> String<span class="token punctuation">,</span> camera<span class="token operator">:</span> Any<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      playState <span class="token operator">=</span> CloudPlayState<span class="token punctuation">.</span>STATE_STOP
      mHandler<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>MessageUtil<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>ICameraVideoPlayModel<span class="token punctuation">.</span>MSG_CLOUD_VIDEO_STOP<span class="token punctuation">,</span> ICameraVideoPlayModel<span class="token punctuation">.</span>OPERATE_SUCCESS<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onFailure</span><span class="token punctuation">(</span>sessionId<span class="token operator">:</span> Int<span class="token punctuation">,</span> requestId<span class="token operator">:</span> Int<span class="token punctuation">,</span> errCode<span class="token operator">:</span> Int<span class="token punctuation">,</span> camera<span class="token operator">:</span> Any<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      mHandler<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>MessageUtil<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>ICameraVideoPlayModel<span class="token punctuation">.</span>MSG_CLOUD_VIDEO_STOP<span class="token punctuation">,</span> ICameraVideoPlayModel<span class="token punctuation">.</span>OPERATE_FAIL<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>Declaration</strong></p>
<p>Set Cloud Video Mute</p>
<pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">setCloudVideoMute</span><span class="token punctuation">(</span><span class="token keyword">int</span> mute<span class="token punctuation">,</span> <span class="token class-name">OperationDelegateCallBack</span> callBack<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameter</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>mute</td>
<td>Pickup mode: ICameraP2P.MUTE / ICameraP2P.UNMUTE (mute / non-mute)</td>
</tr>
<tr>
<td>OperationDelegateCallBack</td>
<td>operation callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-kotlin"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">setCloudVideoMute</span><span class="token punctuation">(</span>voiceMode<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>cloudVideo <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  cloudVideo<span class="token operator">!!</span><span class="token punctuation">.</span><span class="token function">setCloudVideoMute</span><span class="token punctuation">(</span>voiceMode<span class="token punctuation">,</span> <span class="token keyword">object</span> <span class="token operator">:</span> OperationDelegateCallBack <span class="token punctuation">{</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span>sessionId<span class="token operator">:</span> Int<span class="token punctuation">,</span> requestId<span class="token operator">:</span> Int<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      mHandler<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>MessageUtil<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>ICameraVideoPlayModel<span class="token punctuation">.</span>MSG_CLOUD_VIDEO_MUTE<span class="token punctuation">,</span> IPanelModel<span class="token punctuation">.</span>ARG1_OPERATE_SUCCESS<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onFailure</span><span class="token punctuation">(</span>sessionId<span class="token operator">:</span> Int<span class="token punctuation">,</span> requestId<span class="token operator">:</span> Int<span class="token punctuation">,</span> errCode<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      mHandler<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>MessageUtil<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>ICameraVideoPlayModel<span class="token punctuation">.</span>MSG_CLOUD_VIDEO_MUTE<span class="token punctuation">,</span> IPanelModel<span class="token punctuation">.</span>ARG1_OPERATE_FAIL<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>Declaration</strong></p>
<p>When cloud video is no longer used, deinit Cloud Video</p>
<pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">deinitCloudVideo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Declaration</strong></p>
<p>Callback video YUV data</p>
<pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">onReceiveFrameYUVData</span><span class="token punctuation">(</span><span class="token keyword">int</span> sessionId<span class="token punctuation">,</span> <span class="token class-name">ByteBuffer</span> y<span class="token punctuation">,</span> <span class="token class-name">ByteBuffer</span> u<span class="token punctuation">,</span> <span class="token class-name">ByteBuffer</span> v<span class="token punctuation">,</span> <span class="token keyword">int</span> width<span class="token punctuation">,</span> <span class="token keyword">int</span> height<span class="token punctuation">,</span> <span class="token keyword">int</span> nFrameRate<span class="token punctuation">,</span> <span class="token keyword">int</span> nIsKeyFrame<span class="token punctuation">,</span> <span class="token keyword">long</span> timestamp<span class="token punctuation">,</span> <span class="token keyword">long</span> nProgress<span class="token punctuation">,</span> <span class="token keyword">long</span> nDuration<span class="token punctuation">,</span> <span class="token class-name">Object</span> camera<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameter</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>sessionId</td>
<td>p2p session Id</td>
</tr>
<tr>
<td>y</td>
<td>Video Y data</td>
</tr>
<tr>
<td>u</td>
<td>Video U data</td>
</tr>
<tr>
<td>v</td>
<td>Video V data</td>
</tr>
<tr>
<td>width</td>
<td>Video width</td>
</tr>
<tr>
<td>height</td>
<td>Video height</td>
</tr>
<tr>
<td>timestamp</td>
<td>Time stamp</td>
</tr>
<tr>
<td>nFrameRate</td>
<td>Frame rate</td>
</tr>
<tr>
<td>nIsKeyFrame</td>
<td>Whether I frame</td>
</tr>
<tr>
<td>nProgress</td>
<td>ime progress (the progress of the message center video)</td>
</tr>
<tr>
<td>nDuration</td>
<td>Duration (message center video duration)</td>
</tr>
<tr>
<td>camera</td>
<td>/</td>
</tr>
</tbody>
</table>
<blockquote>
<p>As long as the video here is concerned about nProgress, nDuration</p>
</blockquote>
<p><strong>Sample Code</strong></p>
<pre class="language-"><code class="lang-kotlin"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onReceiveFrameYUVData</span><span class="token punctuation">(</span>sessionId<span class="token operator">:</span> Int<span class="token punctuation">,</span> y<span class="token operator">:</span> ByteBuffer<span class="token punctuation">,</span> u<span class="token operator">:</span> ByteBuffer<span class="token punctuation">,</span> v<span class="token operator">:</span> ByteBuffer<span class="token punctuation">,</span> width<span class="token operator">:</span> Int<span class="token punctuation">,</span> height<span class="token operator">:</span> Int<span class="token punctuation">,</span> nFrameRate<span class="token operator">:</span> Int<span class="token punctuation">,</span> nIsKeyFrame<span class="token operator">:</span> Int<span class="token punctuation">,</span> timestamp<span class="token operator">:</span> Long<span class="token punctuation">,</span> nProgress<span class="token operator">:</span> Long<span class="token punctuation">,</span> nDuration<span class="token operator">:</span> Long<span class="token punctuation">,</span> camera<span class="token operator">:</span> Any<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> map <span class="token operator">=</span> HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Long<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  map<span class="token punctuation">[</span><span class="token string">&quot;progress&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> nProgress
  map<span class="token punctuation">[</span><span class="token string">&quot;duration&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> nDuration
  mHandler<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>MessageUtil<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>ICameraVideoPlayModel<span class="token punctuation">.</span>MSG_CLOUD_VIDEO_INFO<span class="token punctuation">,</span> ICameraVideoPlayModel<span class="token punctuation">.</span>OPERATE_SUCCESS<span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>Flow Chart</strong></p>
<p><img src="images/video_play_flow.png" alt=""></p>
<h3 id="alarm-message-and-playback"><a name="alarm-message-and-playback" class="anchor-navigation-ex-anchor" href="#alarm-message-and-playback"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.1. Alarm message and playback</h3>
<p>There is no direct correlation between the alarm message and the record videos in memory card, the only correlation is that in the memory card event recording mode, the trigger reason and time point of the alarm message and record video are the same.</p>
<p>The alarm message is saved in the Tuya cloud, and the video recording of the memory card is saved in the camera&apos;s memory card, and the video in the memory card may be overwritten when the capacity is insufficient. The switch recorded by the memory card is not related to the switch that detects the alarm, so even in the mode of recording the memory card event, the alarm message and the video recording in the memory card are not one-to-one.</p>
<p>However, if there is a video recording at the time when the alarm message occurs, the SDK does not provide an interface for such correlation search. The developer can establish the correlation by searching whether there is a corresponding video recording in the video clip of the memory card on the same day by the trigger time of the alarm message.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="ptz.html" class="navigation navigation-prev " aria-label="Previous page: PTZ">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="Camera_Message_Center.html#Message List" class="navigation navigation-next " aria-label="Next page: Message List">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Detection Alarm","level":"1.10","depth":1,"next":{"title":"Message List","level":"1.10.1","depth":2,"anchor":"#Message List","path":"resource/Camera_Message_Center.md","ref":"./resource/Camera_Message_Center.md#Message List","articles":[]},"previous":{"title":"PTZ","level":"1.9.4","depth":2,"path":"resource/ptz.md","ref":"./resource/ptz.md","articles":[]},"dir":"ltr"},"config":{"plugins":["js-sequence-diagram-full@>=0.3.1","prism","-highlight","anchors","splitter","github","anchor-navigation-ex","ga","expandable-chapters-small","pageview-count","language-picker","hide-element","flexible-alerts"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"css":["prismjs/themes/prism-okaidia.css"],"lang":{"oc":"objectivec","objc":"objectivec","objective-c":"objectivec"},"ignore":["sequence"]},"language-picker":{"grid-columns":3},"github":{"url":"https://github.com/TuyaInc/tuyasmart_camera_android_sdk"},"splitter":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"js-sequence-diagram-full":{},"hide-element":{"elements":[".gitbook-link"]},"fontsettings":{"theme":"white","family":"sans","size":2},"anchor-navigation-ex":{"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showGoTop":false,"showLevel":true},"pageview-count":{},"expandable-chapters-small":{},"flexible-alerts":{"danger":{"className":"danger","icon":"fa fa-ban","label":{"zh-hans":"æ³¨æ","en":"Attention"}},"note":{"className":"info","icon":"fa fa-info-circle","label":{"zh-hans":"æç¤º","en":"Note"}},"style":"flat","tip":{"className":"tip","icon":"fa fa-lightbulb-o","label":{"zh-hans":"Tips","en":"Tip"}},"warning":{"className":"warning","icon":"fa fa-exclamation-triangle","label":{"zh-hans":"è­¦å","en":"Warning"}}},"ga":{"configuration":"auto","token":"UA-165828612-1"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"resource/Camera_Message_Center.md","mtime":"2020-09-01T20:48:44.577Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-09-01T20:49:36.361Z"},"basePath":"..","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-js-sequence-diagram-full/sequence-diagram-min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-js-sequence-diagram-full/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-pageview-count/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-language-picker/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-hide-element/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-flexible-alerts/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

